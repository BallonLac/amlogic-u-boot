/*
 * AMLOGIC LCD panel driver.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the named License,
 * or any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 *
 */

#include <common.h>
#include <amlogic/aml_lcd.h>
#include <asm/arch/gpio.h>

#ifdef CONFIG_AML_LCD_EXTERN
#include "lcd_extern.h"
#endif

static char lcd_cpu_gpio[LCD_CPU_GPIO_NUM_MAX][LCD_CPU_GPIO_NAME_MAX] = {
	"GPIOA_10", /* panel rst */
	"GPIOA_9", /* panel power */
	"invalid", /* ending flag */
};

static struct lcd_power_step_s lcd_power_on_step[] = {
	{LCD_POWER_TYPE_CPU,   1,1,40,}, /* lcd power */
	{LCD_POWER_TYPE_CPU,   0,0,10,}, /* lcd_reset */
	{LCD_POWER_TYPE_CPU,   0,1,120,}, /* lcd_reset */
	{LCD_POWER_TYPE_SIGNAL,0,0,0,},  /* signal */
	{LCD_POWER_TYPE_MAX,   0,0,0,},  /* ending flag */
};
static struct lcd_power_step_s lcd_power_off_step[] = {
	{LCD_POWER_TYPE_SIGNAL,0,0,50,},  /* signal */
	{LCD_POWER_TYPE_CPU,   0,0,10,}, /* lcd_reset */
	{LCD_POWER_TYPE_CPU,   1,0,100,}, /* power off */
	{LCD_POWER_TYPE_MAX,   0,0,0,},   /* ending flag */
};

static char lcd_bl_gpio[BL_GPIO_NUM_MAX][LCD_CPU_GPIO_NAME_MAX] = {
	"GPIOA_2", /* BL_EN */
	"GPIOA_11", /* BL_PWM */
	"invalid", /* ending flag */
};

struct ext_lcd_config_s ext_lcd_config[LCD_NUM_MAX] = {
	{/* RXT101 */
	"lcd_0",LCD_MIPI,8,
	/* basic timing */
	800,1280,860,1334,20,20,0,16,18,0,
	/* clk_attr */
	0,0,1,68000000,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	/* mipi_attr */
	4,1000,0,1,0,2,1,0,Rsv_val,Rsv_val,
	/* power step */
	lcd_power_on_step, lcd_power_off_step,
	/* backlight */
	100,255,10,128,128,
	BL_CTRL_PWM,0,1,0,200,200,
	BL_PWM_NEGATIVE,BL_PWM_F,180,100,25,1,1,
	Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	10,10,Rsv_val},

	{/* AML101 */
	"lcd_1",LCD_MIPI,8,
	/* basic timing */
	1200,1920,1341,1981,1,60,0,1,25,0,
	/* clk_attr */
	0,0,1,160000000,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	/* mipi_attr */
	4,1000,0,1,0,2,1,0,Rsv_val,Rsv_val,
	/* power step */
	lcd_power_on_step, lcd_power_off_step,
	/* backlight */
	100,255,10,128,128,
	BL_CTRL_PWM,0,1,0,200,200,
	BL_PWM_NEGATIVE,BL_PWM_F,180,100,25,1,1,
	Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	Rsv_val,Rsv_val,Rsv_val,Rsv_val,
	10,10,Rsv_val},

	{.panel_type = "invalid"},
};

static struct lcd_pinmux_ctrl_s lcd_pinmux_ctrl[LCD_PINMX_MAX] = {
	{
		.name = "lcd_pin",
		.pinmux_set = {{LCD_PINMUX_END, 0x0}},
		.pinmux_clr = {{LCD_PINMUX_END, 0x0}},
	},
	{
		.name = "invalid",
	},
};

static struct lcd_pinmux_ctrl_s bl_pinmux_ctrl[BL_PINMUX_MAX] = {
	{
		.name = "bl_pwm_on_pin", //GPIOA_11
		.pinmux_set = {{11, 0x00400000}, {LCD_PINMUX_END, 0x0}}, // TBD
		.pinmux_clr = {{11, 0x00f00000}, {LCD_PINMUX_END, 0x0}}, //
	},
	{
		.name = "invalid",
	},
};

static unsigned char mipi_init_on_table[DSI_INIT_ON_MAX] = {
	0x05, 1, 0x11,
	0xfd, 1, 20,
	0x05, 1, 0x29,
	0xfd, 1, 20,
	0xff, 0,   //ending
};
static unsigned char mipi_init_off_table[DSI_INIT_OFF_MAX] = {
	0x05, 1, 0x28,
	0xfd, 1, 10,
	0x05, 1, 0x10,
	0xfd, 1, 10,
	0xff, 0,   //ending
};

static unsigned char mipi_init_on_table_RX101[DSI_INIT_ON_MAX] = {
	0x39, 4, 0xFF, 0x98, 0x81, 0x03,
    0x15, 2, 0x01, 0x00,
    0x15, 2, 0x02, 0x00,
    0x15, 2, 0x03, 0x53,
    0x15, 2, 0x04, 0x53,
    0x15, 2, 0x05, 0x13,
    0x15, 2, 0x06, 0x04,
    0x15, 2, 0x07, 0x02,
    0x15, 2, 0x08, 0x02,
    0x15, 2, 0x09, 0x00,
    0x15, 2, 0x0a, 0x00,
    0x15, 2, 0x0b, 0x00,
    0x15, 2, 0x0c, 0x00,
    0x15, 2, 0x0d, 0x00,
    0x15, 2, 0x0e, 0x00,
    0x15, 2, 0x0f, 0x00,
    0x15, 2, 0x10, 0x00,
    0x15, 2, 0x11, 0x00,
    0x15, 2, 0x12, 0x00,
    0x15, 2, 0x13, 0x00,
    0x15, 2, 0x14, 0x00,
    0x15, 2, 0x15, 0x00,
    0x15, 2, 0x16, 0x00,
    0x15, 2, 0x17, 0x00,
    0x15, 2, 0x18, 0x00,
    0x15, 2, 0x19, 0x00,
    0x15, 2, 0x1a, 0x00,
    0x15, 2, 0x1b, 0x00,
    0x15, 2, 0x1c, 0x00,
    0x15, 2, 0x1d, 0x00,
    0x15, 2, 0x1e, 0xC0,
    0x15, 2, 0x1f, 0x80,
    0x15, 2, 0x20, 0x02,
    0x15, 2, 0x21, 0x09,
    0x15, 2, 0x22, 0x00,
    0x15, 2, 0x23, 0x00,
    0x15, 2, 0x24, 0x00,
    0x15, 2, 0x25, 0x00,
    0x15, 2, 0x26, 0x00,
    0x15, 2, 0x27, 0x00,
    0x15, 2, 0x28, 0x55,
    0x15, 2, 0x29, 0x03,
    0x15, 2, 0x2a, 0x00,
    0x15, 2, 0x2b, 0x00,
    0x15, 2, 0x2c, 0x00,
    0x15, 2, 0x2d, 0x00,
    0x15, 2, 0x2e, 0x00,
    0x15, 2, 0x2f, 0x00,
    0x15, 2, 0x30, 0x00,
    0x15, 2, 0x31, 0x00,
    0x15, 2, 0x32, 0x00,
    0x15, 2, 0x33, 0x00,
    0x15, 2, 0x34, 0x00,
    0x15, 2, 0x35, 0x00,
    0x15, 2, 0x36, 0x00,
    0x15, 2, 0x37, 0x00,
    0x15, 2, 0x38, 0x3c,
    0x15, 2, 0x39, 0x00,
    0x15, 2, 0x3a, 0x00,
    0x15, 2, 0x3b, 0x00,
    0x15, 2, 0x3c, 0x00,
    0x15, 2, 0x3d, 0x00,
    0x15, 2, 0x3e, 0x00,
    0x15, 2, 0x3f, 0x00,
    0x15, 2, 0x40, 0x00,
    0x15, 2, 0x41, 0x00,
    0x15, 2, 0x42, 0x00,
    0x15, 2, 0x43, 0x00,
    0x15, 2, 0x44, 0x00,
    0x15, 2, 0x50, 0x01,
    0x15, 2, 0x51, 0x23,
    0x15, 2, 0x52, 0x45,
    0x15, 2, 0x53, 0x67,
    0x15, 2, 0x54, 0x89,
    0x15, 2, 0x55, 0xab,
    0x15, 2, 0x56, 0x01,
    0x15, 2, 0x57, 0x23,
    0x15, 2, 0x58, 0x45,
    0x15, 2, 0x59, 0x67,
    0x15, 2, 0x5a, 0x89,
    0x15, 2, 0x5b, 0xab,
    0x15, 2, 0x5c, 0xcd,
    0x15, 2, 0x5d, 0xef,
    0x15, 2, 0x5e, 0x01,
    0x15, 2, 0x5f, 0x0A,
    0x15, 2, 0x60, 0x02,
    0x15, 2, 0x61, 0x02,
    0x15, 2, 0x62, 0x08,
    0x15, 2, 0x63, 0x15,
    0x15, 2, 0x64, 0x14,
    0x15, 2, 0x65, 0x02,
    0x15, 2, 0x66, 0x11,
    0x15, 2, 0x67, 0x10,
    0x15, 2, 0x68, 0x02,
    0x15, 2, 0x69, 0x0F,
    0x15, 2, 0x6a, 0x0E,
    0x15, 2, 0x6b, 0x02,
    0x15, 2, 0x6c, 0x0D,
    0x15, 2, 0x6d, 0x0C,
    0x15, 2, 0x6e, 0x06,
    0x15, 2, 0x6f, 0x02,
    0x15, 2, 0x70, 0x02,
    0x15, 2, 0x71, 0x02,
    0x15, 2, 0x72, 0x02,
    0x15, 2, 0x73, 0x02,
    0x15, 2, 0x74, 0x02,
    0x15, 2, 0x75, 0x0A,
    0x15, 2, 0x76, 0x02,
    0x15, 2, 0x77, 0x02,
    0x15, 2, 0x78, 0x06,
    0x15, 2, 0x79, 0x15,
    0x15, 2, 0x7a, 0x14,
    0x15, 2, 0x7b, 0x02,
    0x15, 2, 0x7c, 0x10,
    0x15, 2, 0x7d, 0x11,
    0x15, 2, 0x7e, 0x02,
    0x15, 2, 0x7f, 0x0C,
    0x15, 2, 0x80, 0x0D,
    0x15, 2, 0x81, 0x02,
    0x15, 2, 0x82, 0x0E,
    0x15, 2, 0x83, 0x0F,
    0x15, 2, 0x84, 0x08,
    0x15, 2, 0x85, 0x02,
    0x15, 2, 0x86, 0x02,
    0x15, 2, 0x87, 0x02,
    0x15, 2, 0x88, 0x02,
    0x15, 2, 0x89, 0x02,
    0x15, 2, 0x8a, 0x02,
    0x39, 4, 0xFF, 0x98, 0x81, 0x04,
    0x15, 2, 0x6C, 0x15,
    0x15, 2, 0x6E, 0x30,
    0x15, 2, 0x6F, 0x55,
    0x15, 2, 0x3A, 0x24,
    0x15, 2, 0x8D, 0x1F,
    0x15, 2, 0x87, 0xBA,
    0x15, 2, 0x26, 0x76,
    0x15, 2, 0xB2, 0xD1,
    0x15, 2, 0xB5, 0x07,
    0x15, 2, 0x35, 0x1F,
    0x15, 2, 0x31, 0x75,
    0x15, 2, 0x3B, 0x98,
    0x15, 2, 0x38, 0x01,
    0x15, 2, 0x39, 0x00,
    0x15, 2, 0x88, 0x0B,
    0x39, 4, 0xFF, 0x98, 0x81, 0x01,
    0x15, 2, 0x22, 0x0A,
    0x15, 2, 0x31, 0x09,
    0x15, 2, 0x35, 0x07,
    0x15, 2, 0x53, 0x48,
    0x15, 2, 0x40, 0x33,
    0x15, 2, 0x55, 0x88,
    0x15, 2, 0x50, 0x95,
    0x15, 2, 0x51, 0x95,
    0x15, 2, 0x60, 0x30,
    0x15, 2, 0x34, 0x01,
    0x15, 2, 0xA0, 0x0F,
    0x15, 2, 0xA1, 0x17,
    0x15, 2, 0xA2, 0x22,
    0x15, 2, 0xA3, 0x19,
    0x15, 2, 0xA4, 0x15,
    0x15, 2, 0xA5, 0x28,
    0x15, 2, 0xA6, 0x1C,
    0x15, 2, 0xA7, 0x1C,
    0x15, 2, 0xA8, 0x78,
    0x15, 2, 0xA9, 0x1C,
    0x15, 2, 0xAA, 0x28,
    0x15, 2, 0xAB, 0x69,
    0x15, 2, 0xAC, 0x1A,
    0x15, 2, 0xAD, 0x19,
    0x15, 2, 0xAE, 0x4B,
    0x15, 2, 0xAF, 0x22,
    0x15, 2, 0xB0, 0x2A,
    0x15, 2, 0xB1, 0x4B,
    0x15, 2, 0xB2, 0x6B,
    0x15, 2, 0xB3, 0x3F,
    0x15, 2, 0xC0, 0x01,
    0x15, 2, 0xC1, 0x17,
    0x15, 2, 0xC2, 0x22,
    0x15, 2, 0xC3, 0x19,
    0x15, 2, 0xC4, 0x15,
    0x15, 2, 0xC5, 0x28,
    0x15, 2, 0xC6, 0x1C,
    0x15, 2, 0xC7, 0x1D,
    0x15, 2, 0xC8, 0x78,
    0x15, 2, 0xC9, 0x1C,
    0x15, 2, 0xCA, 0x28,
    0x15, 2, 0xCB, 0x69,
    0x15, 2, 0xCC, 0x1A,
    0x15, 2, 0xCD, 0x19,
    0x15, 2, 0xCE, 0x4B,
    0x15, 2, 0xCF, 0x22,
    0x15, 2, 0xD0, 0x2A,
    0x15, 2, 0xD1, 0x4B,
    0x15, 2, 0xD2, 0x6B,
    0x15, 2, 0xD3, 0x3F,
    0x39, 4, 0xFF, 0x98, 0x81, 0x00,
    0x15, 2, 0x35, 0x00,
    0x05, 1, 0x11,
    0xfd, 1, 120,	/*delay, 120ms*/
    0x05, 1, 0x29,
    0xfd, 1, 120,	/*delay, 120ms*/
    0x39, 4, 0xFF, 0x98, 0x81, 0x00,
    0xff, 0,	/*ending*/
};
static unsigned char mipi_init_off_table_RX101[DSI_INIT_OFF_MAX] = {
	0x05, 1, 0x28,
	0xfd, 1, 10,
	0x05, 1, 0x10,
	0xfd, 1, 10,
	0xff, 0,   /*ending*/
};

static unsigned char mipi_init_on_table_AML101[DSI_INIT_ON_MAX] = {
    0x15, 2, 0xB0, 0x01,
    0x15, 2, 0xC0, 0x26,
    0x15, 2, 0xC1, 0x10,
    0x15, 2, 0xC2, 0x0E,
    0x15, 2, 0xC3, 0x00,
    0x15, 2, 0xC4, 0x00,
    0x15, 2, 0xC5, 0x23,
    0x15, 2, 0xC6, 0x11,
    0x15, 2, 0xC7, 0x22,
    0x15, 2, 0xC8, 0x20,
    0x15, 2, 0xC9, 0x1E,
    0x15, 2, 0xCA, 0x1C,
    0x15, 2, 0xCB, 0x0C,
    0x15, 2, 0xCC, 0x0A,
    0x15, 2, 0xCD, 0x08,
    0x15, 2, 0xCE, 0x06,
    0x15, 2, 0xCF, 0x18,
    0x15, 2, 0xD0, 0x02,
    0x15, 2, 0xD1, 0x00,
    0x15, 2, 0xD2, 0x00,
    0x15, 2, 0xD3, 0x00,
    0x15, 2, 0xD4, 0x26,
    0x15, 2, 0xD5, 0x0F,
    0x15, 2, 0xD6, 0x0D,
    0x15, 2, 0xD7, 0x00,
    0x15, 2, 0xD8, 0x00,
    0x15, 2, 0xD9, 0x23,
    0x15, 2, 0xDA, 0x11,
    0x15, 2, 0xDB, 0x21,
    0x15, 2, 0xDC, 0x1F,
    0x15, 2, 0xDD, 0x1D,
    0x15, 2, 0xDE, 0x1B,
    0x15, 2, 0xDF, 0x0B,
    0x15, 2, 0xE0, 0x09,
    0x15, 2, 0xE1, 0x07,
    0x15, 2, 0xE2, 0x05,
    0x15, 2, 0xE3, 0x17,
    0x15, 2, 0xE4, 0x01,
    0x15, 2, 0xE5, 0x00,
    0x15, 2, 0xE6, 0x00,
    0x15, 2, 0xE7, 0x00,
    0x15, 2, 0xB0, 0x03,
    0x15, 2, 0xBE, 0x04,
    0x15, 2, 0xB9, 0x40,
    0x15, 2, 0xCC, 0x88,
    0x15, 2, 0xC8, 0x0C,
    0x15, 2, 0xC9, 0x07,
    0x15, 2, 0xCD, 0x01,
    0x15, 2, 0xCA, 0x40,
    0x15, 2, 0xCE, 0x1A,
    0x15, 2, 0xCF, 0x60,
    0x15, 2, 0xD2, 0x08,
    0x15, 2, 0xD3, 0x08,
    0x15, 2, 0xDB, 0x01,
    0x15, 2, 0xD9, 0x06,
    0x15, 2, 0xD4, 0x00,
    0x15, 2, 0xD5, 0x01,
    0x15, 2, 0xD6, 0x04,
    0x15, 2, 0xD7, 0x03,
    0x15, 2, 0xC2, 0x00,
    0x15, 2, 0xC3, 0x0E,
    0x15, 2, 0xC4, 0x00,
    0x15, 2, 0xC5, 0x0E,
    0x15, 2, 0xDD, 0x00,
    0x15, 2, 0xDE, 0x0E,
    0x15, 2, 0xE6, 0x00,
    0x15, 2, 0xE7, 0x0E,
    0x15, 2, 0xC2, 0x00,
    0x15, 2, 0xC3, 0x0E,
    0x15, 2, 0xC4, 0x00,
    0x15, 2, 0xC5, 0x0E,
    0x15, 2, 0xDD, 0x00,
    0x15, 2, 0xDE, 0x0E,
    0x15, 2, 0xE6, 0x00,
    0x15, 2, 0xE7, 0x0E,
    0x15, 2, 0xB0, 0x06,
    0x15, 2, 0xC0, 0xA5,
    0x15, 2, 0xD5, 0x1C,
    0x15, 2, 0xC0, 0x00,
    0x15, 2, 0xB0, 0x00,
    0x15, 2, 0xBD, 0x30,

    0x15, 2, 0xF9, 0x5C,
    0x15, 2, 0xC2, 0x14,
    0x15, 2, 0xC4, 0x14,
    0x15, 2, 0xBF, 0x15,
    0x15, 2, 0xC0, 0x0C,

    0x15, 2, 0xB0, 0x00,
    0x15, 2, 0xB1, 0x79,
    0x15, 2, 0xBA, 0x8F,

    0x05, 1, 0x11,
    0xfd, 1, 120, /*delay 120ms*/
    0x05, 1, 0x29,
    0xfd, 1, 120, /*delay 120ms*/
    0xff, 0, /*ending*/
};
static unsigned char mipi_init_off_table_AML101[DSI_INIT_OFF_MAX] = {
	0x05, 1, 0x28,
	0xfd, 1, 10,
	0x05, 1, 0x10,
	0xfd, 1, 10,
	0xff, 0,   /*ending*/
};

static struct dsi_config_s lcd_mipi_config = {
	.lane_num = 4,
	.bit_rate_max = 550, /* MHz */
	.factor_numerator   = 0,
	.factor_denominator = 100,
	.operation_mode_init = 1,    /* 0=video mode, 1=command mode */
	.operation_mode_display = 0, /* 0=video mode, 1=command mode */
	.video_mode_type = 2, /* 0=sync_pulse, 1=sync_event, 2=burst */
	.clk_always_hs = 1, /* 0=disable, 1=enable */
	.phy_switch = 0,   /* 0=auto, 1=standard, 2=slow */

	.dsi_init_on  = &mipi_init_on_table[0],
	.dsi_init_off = &mipi_init_off_table[0],
	.extern_init = 0xff, /* ext_index if needed, 0xff for invalid */
	.check_en = 0,
	.check_state = 0,
};

static struct lcd_power_ctrl_s lcd_power_ctrl = {
	.power_on_step = {
		{
			.type = LCD_POWER_TYPE_CPU,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 1, /* 0=output_low, 1=output_high, 2=input */
			.delay = 10, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_CPU,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 0, /* 0=output_low, 1=output_high, 2=input */
			.delay = 20, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_CPU,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 1, /* 0=output_low, 1=output_high, 2=input */
			.delay = 20, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_SIGNAL,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 1, /* 0=output_low, 1=output_high, 2=input */
			.delay = 0, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_MAX, /* ending flag */
		},
	},
	.power_off_step = {
		{
			.type = LCD_POWER_TYPE_SIGNAL,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 0, /* 0=output_low, 1=output_high, 2=input */
			.delay = 100, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_CPU,
			.index = 0, /* point to cpu_gpio[] struct */
			.value = 0, /* 0=output_low, 1=output_high, 2=input */
			.delay = 100, /* unit: ms */
		},
		{
			.type = LCD_POWER_TYPE_MAX, /* ending flag */
		},
	},
};

struct lcd_config_s lcd_config_dft = {
	.lcd_mode = LCD_MODE_TABLET,
	.lcd_key_valid = 0,
	.lcd_clk_path = 0,
	.lcd_basic = {
		.model_name = "default",
		.lcd_type = LCD_TYPE_MAX,
		.lcd_bits = 8,
		.h_active = 768,
		.v_active = 1024,
		.h_period = 948,
		.v_period = 1140,

		.screen_width   = 119,
		.screen_height  = 159,
	},

	.lcd_timing = {
		.clk_auto = 1,
		.lcd_clk = 64843200,
		.ss_level = 0,
		.fr_adjust_type = 0,

		.hsync_width = 64,
		.hsync_bp    = 56,
		.hsync_pol   = 0,
		.vsync_width = 50,
		.vsync_bp    = 30,
		.vsync_pol   = 0,
	},

	.lcd_control = {
		.mipi_config= &lcd_mipi_config,
	},
	.lcd_power = &lcd_power_ctrl,

	.pinctrl_ver = 2,
	.lcd_pinmux = lcd_pinmux_ctrl,
	.pinmux_set = {{LCD_PINMUX_END, 0x0}},
	.pinmux_clr = {{LCD_PINMUX_END, 0x0}},
};

struct bl_config_s bl_config_dft = {
	.name = "default",
	.bl_key_valid = 0,

	.level_default = 100,
	.level_min = 10,
	.level_max = 255,
	.level_mid = 128,
	.level_mid_mapping = 128,
	.level = 0,

	.method = BL_CTRL_MAX,
	.power_on_delay = 200,
	.power_off_delay = 200,

	.en_gpio = 0xff,
	.en_gpio_on = 1,
	.en_gpio_off = 0,

	.bl_pwm = NULL,
	.bl_pwm_combo0 = NULL,
	.bl_pwm_combo1 = NULL,
	.pwm_on_delay = 10,
	.pwm_off_delay = 10,

	.bl_extern_index = 0xff,

	.pinctrl_ver = 2,
	.bl_pinmux = bl_pinmux_ctrl,
	.pinmux_set = {{11, 0x00400000}, {LCD_PINMUX_END, 0x0}},
	.pinmux_clr = {{11, 0x00f00000}, {LCD_PINMUX_END, 0x0}},
};

void lcd_config_bsp_init(void)
{
	int i, j;
	char *str;
	struct ext_lcd_config_s *ext_lcd = NULL;

	str = getenv("panel_type");
	if (str) {
		for (i = 0 ; i < LCD_NUM_MAX ; i++) {
			ext_lcd = &ext_lcd_config[i];
			if (strcmp(ext_lcd->panel_type, str) == 0) {
				switch (i) {
				case 0: /* RX101 */
					lcd_mipi_config.dsi_init_on = mipi_init_on_table_RX101;
					lcd_mipi_config.dsi_init_off = mipi_init_off_table_RX101;
					break;
				case 1: /* AML101 */
					lcd_mipi_config.dsi_init_on = mipi_init_on_table_AML101;
					lcd_mipi_config.dsi_init_off = mipi_init_off_table_AML101;
					break;
				default:
					break;
				}
				break;
			}
		}
	}

	for (i = 0; i < LCD_CPU_GPIO_NUM_MAX; i++) {
		if (strcmp(lcd_cpu_gpio[i], "invalid") == 0)
			break;
		strcpy(lcd_power_ctrl.cpu_gpio[i], lcd_cpu_gpio[i]);
	}
	for (j = i; j < LCD_CPU_GPIO_NUM_MAX; j++)
		strcpy(lcd_power_ctrl.cpu_gpio[j], "invalid");
	for (i = 0; i < BL_GPIO_NUM_MAX; i++) {
		if (strcmp(lcd_bl_gpio[i], "invalid") == 0)
			break;
		strcpy(bl_config_dft.gpio_name[i], lcd_bl_gpio[i]);
	}
	for (j = i; j < BL_GPIO_NUM_MAX; j++)
		strcpy(bl_config_dft.gpio_name[j], "invalid");
}
